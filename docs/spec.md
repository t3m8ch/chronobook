# Система бронирования
# Что не устраивает в других системах?
1. Редактирование шаблонов сообщений
2. Нет гибкости во времени отправки сообщений (например, хочется отправлять за 3 часа до записи, но не получается)
3. Нет возможности создания форм для бронирования (в некоторых системах) (можно через сайт, можно через бота, в зависимости от места рекламирования)

Также нужно, чтобы была возможность сделать несколько администраторов.
Также можно сделать небольшую кастомизацию внешнего вида (смена логотипа и название, например)
В будущем возможна оплата, но сейчас не надо.

# Журнал предоставленных услуг
Есть два случая:
1. Когда стоимость услуги предсказуема (условно, нарастить ногти)
2. Когда стоимость услуги определяется после записи (например, диагностика автомобиля)

# Что нужно?
1. Веб-панель мастера и админа с авторизацией (по мобильному телефону + смс)
2. Мини СРМ для учета клиентов. Телефон, Имя, Фамилия для начала достаточно из нужно информации
3. Клиент должен иметь возможность забронировать время приема к конкретному мастеру из предложенных свободных дат и слотов времени.
4. Слоты должны быть настраиваемые, нужно создавать расписание
5. Также веб версия формы бронирования, включая мобильную версию.
6. Клиент и мастер должны получать уведомления в телеграм. Если у клиента. нет телеграм, то через смс.
7. Клиент может отменить или перенести запись
8. Мастер, он же администратор может также перенести или отменить запись. Обо всех изменениях или событиях должны приходить push сообщения.
9. Сами шаблоны сообщений также должны быть редактируемые (каждый мастер под свою нишу).
10. Нужна возможность отправлять рассылки всем клиентам или выборочно (смс или тг).
11. В админке нужно заполнять адрес салона красоты, чтобы клиент мог выбрать ближайший.
12. Пока не требуется онлайн оплата, система лояльности, рейтинг мастеров.

# Система администраторов
1. root (рут) — он видит все организации, всех мастеров во всех организациях, всех клиентов, он может делать всё и у всех
2. owner (владелец) — он может создать свою организацию (пока только одну), в организации только один владелец, он может CRUD мастеров в рамках своей организации (он же может сам быть мастером), делать всё то же самое, что и мастер
3. master (мастер) — к нему привязывается расписание (следовательно, он может его редактировать)

# Заполнение формы
1. Нужно, чтобы человек писал номер телефона и **подтверждал его кодом **(по многим причинам подтверждение нужно, от противодействия конкурентам до психологических)

# Управляющий
1. У управляющего есть возможность отменить бронь (booking)

# Филиалы
1. Филиал создаётся owner'ом (в том числе им выставляется часовой пояс/город филиала)
2. Филиал выставляется для каждого дня в расписании

# Уведомления
1. Указывается n количества времени, за сколько времени до начала услуги отправляется уведомление
2. Но, нужно иметь возможность выставить запрещённое время, когда не слать уведомление (например, уведомление настроено за 8 часов до начала услуги, но если услуга заказана в 9 утра, в час ночи слать не надо)
3. Уведомления устанавливаются управляющим (это логично, потому что филиалы могут находится в разных часовых поясах)
4. Человек может выбрать n количество клиентов и разослать им сообщение вручную
5. Если уведомление попадает в запрещённое время, то **(надо над этим вопросом подумать)**

# Часовой пояс
1. Часовой пояс клиента определяется выбранным филиалом
2. Нужно чётко в форме написать клиенту, для какого часового пояса это время указано

# Процесс бронирования
Для каждой организации создаётся своя отдельная форма по отдельной ссылке. Там человек заполняет ФИО, номер телефона, вводит какой-то комментарий. После чего он должен выбрать филиал (branch) организации. Когда он это сделал, у него появляется поле с выбором мастера (master). Когда он выбрал мастера, пользователю предоставляется выбор услуг (service), которые этот мастер может оказать. Когда человек выбрал услугу, у него рисуется таймлайн на сегодняшний день и на другие. На этом таймлайне отображаются свободные и занятые слоты. У каждой услуги есть длительность. В зависимости от этого пользователь может выбрать свободные слоты в расписании, которые по времени больше или равны длительности услуги.

# Время
Для времени используется шаг в 15 минут. Это необходимо, чтобы для фоновых задач не приходилось каждую секунду проверять состояние сервиса. Мы это делаем раз в 15 минут. Любое время бронирования, рабочее время, перерывы округляются до этого шага.

# Организация
Она может функционировать только при выполнении всех условий:
1. Есть хотя бы один филиал
2. Есть хотя бы один мастер
3. Хотя бы у одного мастера есть расписание
4. Есть хотя бы одна услуга
